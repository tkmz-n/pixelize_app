(function(e){function t(t){for(var i,o,l=t[0],f=t[1],s=t[2],c=0,h=[];c<l.length;c++)o=l[c],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(i in f)Object.prototype.hasOwnProperty.call(f,i)&&(e[i]=f[i]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,l=1;l<r.length;l++){var f=r[l];0!==n[f]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var i={},n={app:0},a=[];function o(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=i,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,function(t){return e[t]}.bind(null,i));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/pixelize_app/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],f=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=f;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var i=r("85ec"),n=r.n(i);n.a},"4feb":function(e,t,r){"use strict";var i=r("7b32"),n=r.n(i);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Pixelize")],1)},a=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pixelize"},[r("h1",[e._v("Pixelize!!!")]),e._m(0),r("div",[r("label",[r("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.upload}})])]),r("p",[e._v("オリジナル画像の幅："+e._s(e.widthBefore))]),r("p",[e._v("オリジナル画像の高さ："+e._s(e.heightBefore))]),e._m(1),r("div",[r("h2",[e._v("変換")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.toPixel(t)}}},[r("p",[r("label",[e._v(" 色の数（1～100） "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.colors,expression:"colors"}],attrs:{type:"number",min:"1",max:"100"},domProps:{value:e.colors},on:{input:function(t){t.target.composing||(e.colors=t.target.value)}}})])]),r("p",[r("label",[e._v(" 変更後の幅（1～1000） "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.widthAfter,expression:"widthAfter"}],attrs:{type:"number",step:"1",min:"1",max:"1000"},domProps:{value:e.widthAfter},on:{input:function(t){t.target.composing||(e.widthAfter=t.target.value)}}})])]),r("p",[r("label",[e._v(" ピクセルの大きさ（3～30） "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.pixelSize,expression:"pixelSize"}],attrs:{type:"number",min:"3",max:"30"},domProps:{value:e.pixelSize},on:{input:function(t){t.target.composing||(e.pixelSize=t.target.value)}}})])]),r("p",[r("label",[e._v(" グリッド線をつける "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.grid,expression:"grid"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.grid)?e._i(e.grid,null)>-1:e.grid},on:{change:function(t){var r=e.grid,i=t.target,n=!!i.checked;if(Array.isArray(r)){var a=null,o=e._i(r,a);i.checked?o<0&&(e.grid=r.concat([a])):o>-1&&(e.grid=r.slice(0,o).concat(r.slice(o+1)))}else e.grid=n}}})])]),e._m(2)]),r("canvas",{attrs:{id:"preview-after"}})])])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[e._v(" 画像をドット絵に変換します。 "),r("br"),e._v("好きな画像ファイルを選択してから「Pixelize!!!」をクリックしてください。 ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("変換前プレビュー")]),r("canvas",{attrs:{id:"preview-before"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("button",{attrs:{type:"submit"}},[e._v("Pixelize!!!")])])}],f=(r("cb29"),r("fb6a"),{name:"Pixelize",data:function(){return{widthBefore:null,heightBefore:null,widthAfter:100,heightAfter:null,colors:3,pixelSize:10,grid:!0,img:null}},methods:{upload:function(e){var t=null,r=e.target.files;if(0!=r.length){var i=new FileReader;i.readAsDataURL(r[0]),i.onload=function(){t=new Image,t.onload=function(){var e=document.getElementById("preview-before");if(e.getContext){var r=e.getContext("2d");this.widthBefore=t.width,this.heightBefore=t.height,e.width=this.widthBefore,e.height=this.heightBefore,r.drawImage(t,0,0),this.img=t}}.bind(this),t.src=i.result}.bind(this)}},toPixel:function(){var e=document.getElementById("preview-after");if(e.getContext&&null!=this.img){var t=e.getContext("2d"),r=this.widthAfter/this.widthBefore;this.heightAfter=this.heightBefore*r,e.width=this.widthBefore*r,e.height=this.heightBefore*r,t.scale(r,r),t.drawImage(this.img,0,0);var i=t.getImageData(0,0,e.width,e.height),n=t.createImageData(e.width,e.height),a=i.data,o=n.data;s(a,o,e.width,e.height,this.colors),e.width*=this.pixelSize,e.height*=this.pixelSize;var l=c(n,this.pixelSize,this.grid);t.putImageData(l,0,0)}}}}),s=function(e,t,r,i,n){var a=100;n=parseInt(n);for(var o=Array(n),l=0;l<n;l++){var f=Math.floor(Math.random()*i),s=Math.floor(Math.random()*r);o[l]=e.slice(4*(s+f*r),4*(s+f*r)+3)}var c=Array(r*i),h=Array(n);for(l=0;l<n;l++)h[l]=Array(3);var d=Array(n),p=0,v=JSON.parse(JSON.stringify(c)),g=!1;while(1){for(var m=0;m<i;m++)for(var w=0;w<r;w++){var b=e.slice(4*(w+m*r),4*(w+m*r)+3),x=u(b,o[0]),y=0;for(l=1;l<n;l++){var _=u(b,o[l]);_<x&&(x=_,y=l)}c[w+m*r]=y}d.fill(0);for(l=0;l<n;l++)h[l].fill(0);for(m=0;m<i;m++)for(w=0;w<r;w++){for(var A=c[w+m*r],O=0;O<3;O++)h[A][O]+=e[4*(w+m*r)+O];d[A]=d[A]+1}for(l=0;l<n;l++)for(O=0;O<3;O++)o[l][O]=d[l]>0?Math.floor(h[l][O]/d[l]):0;if(g=JSON.stringify(c)===JSON.stringify(v)||p>a,g)break;v=JSON.parse(JSON.stringify(c)),p++}for(m=0;m<i;m++)for(w=0;w<r;w++)for(A=c[w+m*r],O=0;O<3;O++)t[4*(w+m*r)+O]=o[A][O],t[4*(w+m*r)+3]=e[4*(w+m*r)+3]},u=function(e,t){for(var r=0,i=0;i<e.length;i++)r+=Math.pow(Math.abs(t[i]-e[i]),2);return r=Math.sqrt(r),r},c=function(e,t,r){for(var i=255,n=10,a=e.width*t,o=e.height*t,l=new ImageData(e.width*t,e.height*t),f=0;f<o;f++)for(var s=0;s<a;s++)for(var u=Math.floor(f/t),c=Math.floor(s/t),h=0;h<4;h++)l.data[4*(s+f*a)+h]=e.data[4*(c+u*e.width)+h];if(r)for(f=0;f<o;f++)for(s=0;s<a;s++)if(f%t==0||s%t==0||(f+1)%(t*n)==0||(s+1)%(t*n)==0){for(h=0;h<3;h++)l.data[4*(s+f*a)+h]=i;l.data[4*(s+f*a)+h]=i}return l},h=f,d=(r("4feb"),r("2877")),p=Object(d["a"])(h,o,l,!1,null,"e5cec27e",null),v=p.exports,g={name:"App",components:{Pixelize:v}},m=g,w=(r("034f"),Object(d["a"])(m,n,a,!1,null,null,null)),b=w.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(b)}}).$mount("#app")},"7b32":function(e,t,r){},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.4e20aca4.js.map